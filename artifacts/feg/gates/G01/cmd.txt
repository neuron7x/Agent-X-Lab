python - <<'PY2'
from pathlib import Path
import re,yaml
readme=Path('README.md').read_text()
assert 'export PYTHONHASHSEED=0' in readme
for wf in Path('.github/workflows').glob('*.yml'):
 data=yaml.safe_load(wf.read_text()) or {}
 env=data.get('env',{}) if isinstance(data,dict) else {}
 assert str(env.get('PYTHONHASHSEED',''))=='0', f'{wf} missing PYTHONHASHSEED=0'
# scan added feg artifacts for nondeterministic markers
for p in Path('artifacts/feg').rglob('*'):
 if p.is_file():
  t=p.read_text(errors='ignore')
  assert not re.search(r'\b[0-9]{4}-[0-9]{2}-[0-9]{2}T',t), f'timestamp marker in {p}'
print('determinism checks passed')
PY2
