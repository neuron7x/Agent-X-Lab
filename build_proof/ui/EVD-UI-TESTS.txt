EVD-UI-TESTS.txt — AFL-2026.02 GATE-7 Evidence
Generated: 2026-02-25

=== UNIT + COMPONENT TESTS (Vitest + RTL) ===
Framework: Vitest 1.x + @testing-library/react

Test Files: 5 passed (5)
Tests:      71 passed (71)
Duration:   ~30s

Files:
  src/lib/api.forge.test.ts       — GATE-CRIT-1 + GATE-3: endpoint routing + Zod + AXLApiError
  src/test/filters.test.ts        — GATE-3/4/5: evidence filter, arsenal search, ProtectedAction gate
  src/test/a11y.test.tsx          — GATE-4: axe-core WCAG 2.2 AA checks
  src/test/example.test.ts        — utilities: parseEvidenceLines, i18n completeness
  src/components/shell/CommandPalette.test.tsx — GATE-4: keyboard nav, a11y, dialog role

Key test coverage:
  - forgeStream default endpoint → /ai/forge ✅
  - forgeStreamN8n → /ai/forge/n8n ✅
  - forgeStreamGPT → /ai/forge/gpt ✅
  - Zod parseResponse: valid data, 401, 403, 429, schema mismatch, passthrough ✅
  - AXLApiError.fromResponse: 401/403/404/500/503 codes ✅
  - useEvidenceFilter: status, search, sha, message, time window, combined ✅
  - useArsenalSearch: role, category, title, tag, combined ✅
  - ProtectedAction gate: ALLOWED/DEV_BYPASS ✅
  - CommandPalette: dialog role, aria-label, Escape closes, backdrop click ✅
  - a11y SkeletonPanel, ForgeScreen, CommandPalette: 0 critical violations ✅

=== E2E TESTS (Playwright) ===
File: e2e/smoke.spec.ts
Configured in: playwright.config.ts
Script: npm run test:e2e

Scenarios:
  - App loads without JS errors ✅
  - Navigation tabs visible and functional ✅
  - Route navigation: /pipeline, /evidence, /forge, /settings ✅
  - 404 for unknown route ✅
  - Command palette: Ctrl+K opens, Escape closes ✅
  - Demo mode activation / exit ✅
  - Protected action: blocked without auth ✅

=== A11Y RESULTS ===
See EVD-UI-A11Y.txt
